(function(){function e(se){var oe=new Map;if('Connections'in se)for(var ue,pe=se.Connections.properties.connections,de=0,le=pe.length;de<le;++de){ue=pe[de],oe.has(ue[0])||oe.set(ue[0],{parents:[],children:[]});var ge={ID:ue[1],relationship:ue[2]};oe.get(ue[0]).parents.push(ge),oe.has(ue[1])||oe.set(ue[1],{parents:[],children:[]});var he={ID:ue[0],relationship:ue[2]};oe.get(ue[1]).children.push(he)}return oe}function t(se){var oe=new Map;if('Video'in se.Objects.subNodes){var pe=se.Objects.subNodes.Video;for(var de in pe){var le=pe[de];if('Content'in le.properties){var ue=n(pe[de]);oe.set(parseInt(de),ue)}}}return oe}function n(se){var oe=se.properties.Content,pe=se.properties.RelativeFilename||se.properties.Filename,de=pe.slice(pe.lastIndexOf('.')+1).toLowerCase(),le;switch(de){case'bmp':le='image/bmp';break;case'jpg':case'jpeg':le='image/jpeg';break;case'png':le='image/png';break;case'tif':le='image/tiff';break;default:return void console.warn('FBXLoader: Image type "'+de+'" is not supported.');}if('string'==typeof oe)return'data:'+le+';base64,'+oe;var ue=new Uint8Array(oe);return window.URL.createObjectURL(new Blob([ue],{type:le}))}function o(se,oe,pe,de){var le=new Map;if('Texture'in se.Objects.subNodes){var ue=se.Objects.subNodes.Texture;for(var ge in ue){var he=p(ue[ge],oe,pe,de);le.set(parseInt(ge),he)}}return le}function p(se,oe,pe,de){var ge,le=se.id,ue=se.attrName,he=se.properties.FileName,me=se.properties.RelativeFilename,ce=de.get(le).children;if(void 0!==ce&&0<ce.length&&pe.has(ce[0].ID))ge=pe.get(ce[0].ID);else if(void 0!==me&&'/'!==me[0]&&null===me.match(/^[a-zA-Z]:/))ge=me;else{var fe=he.split(/[\\\/]/);ge=0<fe.length?fe[fe.length-1]:he}var ye=oe.path;(0===ge.indexOf('blob:')||0===ge.indexOf('data:'))&&oe.setPath(void 0);var Ie=oe.load(ge);Ie.name=ue,Ie.FBX_ID=le;var be=se.properties.WrapModeU,ve=se.properties.WrapModeV,Ne=void 0===be?0:be.value,xe=void 0===ve?0:ve.value;if(Ie.wrapS=0===Ne?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,Ie.wrapT=0===xe?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,'Scaling'in se.properties){var De=se.properties.Scaling.value;Ie.repeat.x=De[0],Ie.repeat.y=De[1]}return oe.setPath(ye),Ie}function d(se,oe,pe){var de=new Map;if('Material'in se.Objects.subNodes){var le=se.Objects.subNodes.Material;for(var ue in le){var ge=u(le[ue],oe,pe);null!==ge&&de.set(parseInt(ue),ge)}}return de}function u(se,oe,pe){var de=se.id,le=se.attrName,ue=se.properties.ShadingModel;if('object'==typeof ue&&(ue=ue.value),!pe.has(de))return null;var me,ge=pe.get(de).children,he=h(se.properties,oe,ge);switch(ue.toLowerCase()){case'phong':me=new THREE.MeshPhongMaterial;break;case'lambert':me=new THREE.MeshLambertMaterial;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',ue),me=new THREE.MeshPhongMaterial({color:3342591});}return me.setValues(he),me.name=le,me}function h(se,oe,pe){var de={};se.BumpFactor&&(de.bumpScale=se.BumpFactor.value),se.Diffuse&&(de.color=K(se.Diffuse)),se.DisplacementFactor&&(de.displacementScale=se.DisplacementFactor.value),se.ReflectionFactor&&(de.reflectivity=se.ReflectionFactor.value),se.Specular&&(de.specular=K(se.Specular)),se.Shininess&&(de.shininess=se.Shininess.value),se.Emissive&&(de.emissive=K(se.Emissive)),se.EmissiveFactor&&(de.emissiveIntensity=parseFloat(se.EmissiveFactor.value)),se.Opacity&&(de.opacity=parseFloat(se.Opacity.value)),1>de.opacity&&(de.transparent=!0);for(var le=0,ue=pe.length;le<ue;++le){var ge=pe[le],he=ge.relationship;switch(he){case'Bump':de.bumpMap=oe.get(ge.ID);break;case'DiffuseColor':de.map=oe.get(ge.ID);break;case'DisplacementColor':de.displacementMap=oe.get(ge.ID);break;case'EmissiveColor':de.emissiveMap=oe.get(ge.ID);break;case'NormalMap':de.normalMap=oe.get(ge.ID);break;case'ReflectionColor':de.envMap=oe.get(ge.ID),de.envMap.mapping=THREE.EquirectangularReflectionMapping;break;case'SpecularColor':de.specularMap=oe.get(ge.ID);break;case'TransparentColor':de.alphaMap=oe.get(ge.ID),de.transparent=!0;break;case'AmbientColor':case'ShininessExponent':case'SpecularFactor':case'VectorDisplacementColor':default:console.warn('THREE.FBXLoader: %s map is not supported in three.js, skipping texture.',he);}}return de}function m(se,oe){var pe={};if('Deformer'in se.Objects.subNodes){var de=se.Objects.subNodes.Deformer;for(var le in de){var ue=de[le];if('Skin'===ue.attrType){var ge=oe.get(parseInt(le)),he=c(ge,de);he.FBX_ID=parseInt(le),pe[le]=he}}}return pe}function c(se,oe){for(var pe={},de=se.children,le=0,ue=de.length;le<ue;++le){var ge=de[le],he=oe[ge.ID],me={FBX_ID:ge.ID,index:le,indices:[],weights:[],transform:new THREE.Matrix4().fromArray(he.subNodes.Transform.properties.a),transformLink:new THREE.Matrix4().fromArray(he.subNodes.TransformLink.properties.a),linkMode:he.properties.Mode};'Indexes'in he.subNodes&&(me.indices=he.subNodes.Indexes.properties.a,me.weights=he.subNodes.Weights.properties.a),pe[ge.ID]=me}return{map:pe,bones:[]}}function f(se,oe,pe){var de=new Map;if('Geometry'in se.Objects.subNodes){var le=se.Objects.subNodes.Geometry;for(var ue in le){var ge=oe.get(parseInt(ue)),he=y(le[ue],ge,pe);de.set(parseInt(ue),he)}}return de}function y(se,oe,pe){switch(se.attrType){case'Mesh':return I(se,oe,pe);break;case'NurbsCurve':return A(se);}}function I(se,oe,pe){for(var le,de=0;de<oe.children.length&&(le=pe[oe.children[de].ID],void 0===le);++de);return v(se,le)}function v(se,oe){var pe=se.subNodes,de=pe.Vertices.properties.a,le=pe.PolygonVertexIndex.properties.a,ue=[],ge=[],he=[],me=[],ce=[],fe=[],ye=[];if(pe.LayerElementColor)var Ie=D(pe.LayerElementColor[0]);if(pe.LayerElementMaterial)var be=F(pe.LayerElementMaterial[0]);if(pe.LayerElementNormal)var ve=N(pe.LayerElementNormal[0]);if(pe.LayerElementUV)for(var Ne=[],xe=0;pe.LayerElementUV[xe];)Ne.push(x(pe.LayerElementUV[xe])),xe++;var De={};if(oe){var Fe=oe.map;for(var Te in Fe)for(var Ae=Fe[Te],Le=Ae.indices,Se=0;Se<Le.length;Se++){var Be=Le[Se],Ee=Ae.weights[Se];void 0===De[Be]&&(De[Be]=[]),De[Be].push({id:Ae.index,weight:Ee})}}for(var Ce=0,Re=0,Pe=!1,Me=[],Ue=[],je=[],Oe=[],ke=[],ze=[],Xe=0;Xe<le.length;Xe++){var we=le[Xe],Ve=!1;0>we&&(we^=-1,le[Xe]=we,Ve=!0);var _e=[],Ge=[];if(Me.push(3*we,3*we+1,3*we+2),Ie){var He=T(Xe,Ce,we,Ie);je.push(He[0],He[1],He[2])}if(oe){if(void 0!==De[we])for(var We=De[we],Se=0,Ye=We.length;Se<Ye;Se++)Ge.push(We[Se].weight),_e.push(We[Se].id);if(4<Ge.length){Pe||(console.warn('THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights.'),Pe=!0);var Ze=[0,0,0,0],Qe=[0,0,0,0];Ge.forEach(function(nt,at){var it=nt,st=_e[at];Qe.forEach(function(ot,pt,dt){if(it>ot){dt[pt]=it,it=ot;var lt=Ze[pt];Ze[pt]=st,st=lt}})}),_e=Ze,Ge=Qe}for(var xe=Ge.length;4>xe;++xe)Ge[xe]=0,_e[xe]=0;for(var xe=0;4>xe;++xe)ke.push(Ge[xe]),ze.push(_e[xe])}if(ve){var He=T(Xe,Ce,we,ve);Ue.push(He[0],He[1],He[2])}for(var He,xe=0;xe<Ne.length;xe++)He=T(Xe,Ce,we,Ne[xe]),void 0===Oe[xe]&&(Oe[xe]=[]),Oe[xe].push(He[0],He[1]);if(Re++,Ve){for(var xe=2;xe<Re;xe++)ue.push(de[Me[0]]),ue.push(de[Me[1]]),ue.push(de[Me[2]]),ue.push(de[Me[3*(xe-1)]]),ue.push(de[Me[3*(xe-1)+1]]),ue.push(de[Me[3*(xe-1)+2]]),ue.push(de[Me[3*xe]]),ue.push(de[Me[3*xe+1]]),ue.push(de[Me[3*xe+2]]);if(oe)for(var xe=2;xe<Re;xe++)fe.push(ke[0]),fe.push(ke[1]),fe.push(ke[2]),fe.push(ke[3]),fe.push(ke[4*(xe-1)]),fe.push(ke[4*(xe-1)+1]),fe.push(ke[4*(xe-1)+2]),fe.push(ke[4*(xe-1)+3]),fe.push(ke[4*xe]),fe.push(ke[4*xe+1]),fe.push(ke[4*xe+2]),fe.push(ke[4*xe+3]),ye.push(ze[0]),ye.push(ze[1]),ye.push(ze[2]),ye.push(ze[3]),ye.push(ze[4*(xe-1)]),ye.push(ze[4*(xe-1)+1]),ye.push(ze[4*(xe-1)+2]),ye.push(ze[4*(xe-1)+3]),ye.push(ze[4*xe]),ye.push(ze[4*xe+1]),ye.push(ze[4*xe+2]),ye.push(ze[4*xe+3]);if(ve)for(var xe=2;xe<Re;xe++)ge.push(Ue[0]),ge.push(Ue[1]),ge.push(Ue[2]),ge.push(Ue[3*(xe-1)]),ge.push(Ue[3*(xe-1)+1]),ge.push(Ue[3*(xe-1)+2]),ge.push(Ue[3*xe]),ge.push(Ue[3*xe+1]),ge.push(Ue[3*xe+2]);for(var Se=0;Se<Ne.length;Se++){void 0===me[Se]&&(me[Se]=[]);for(var xe=2;xe<Re;xe++)me[Se].push(Oe[Se][0]),me[Se].push(Oe[Se][1]),me[Se].push(Oe[Se][2*(xe-1)]),me[Se].push(Oe[Se][2*(xe-1)+1]),me[Se].push(Oe[Se][2*xe]),me[Se].push(Oe[Se][2*xe+1])}if(Ie)for(var xe=2;xe<Re;xe++)he.push(je[0]),he.push(je[1]),he.push(je[2]),he.push(je[3*(xe-1)]),he.push(je[3*(xe-1)+1]),he.push(je[3*(xe-1)+2]),he.push(je[3*xe]),he.push(je[3*xe+1]),he.push(je[3*xe+2]);if(be&&'AllSame'!==be.mappingType)for(var Ke=T(Xe,Ce,we,be)[0],xe=2;xe<Re;xe++)ce.push(Ke),ce.push(Ke),ce.push(Ke);Ce++,Ve=!1,Re=0,Me=[],Ue=[],je=[],Oe=[],ke=[],ze=[]}}var qe=new THREE.BufferGeometry;if(qe.name=se.name,qe.addAttribute('position',new THREE.Float32BufferAttribute(ue,3)),0<he.length&&qe.addAttribute('color',new THREE.Float32BufferAttribute(he,3)),oe&&(qe.addAttribute('skinIndex',new THREE.Float32BufferAttribute(ye,4)),qe.addAttribute('skinWeight',new THREE.Float32BufferAttribute(fe,4)),qe.FBX_Deformer=oe),0<ge.length&&qe.addAttribute('normal',new THREE.Float32BufferAttribute(ge,3)),0<me.length)for(var Je,xe=0;xe<me.length;xe++)Je='uv'+(xe+1).toString(),0==xe&&(Je='uv'),qe.addAttribute(Je,new THREE.Float32BufferAttribute(me[xe],2));if(be&&'AllSame'!==be.mappingType){for(var $e=ce[0],et=0,xe=0;xe<ce.length;++xe)ce[xe]!==$e&&(qe.addGroup(et,xe-et,$e),$e=ce[xe],et=xe);if(0<qe.groups.length){var tt=qe.groups[qe.groups.length-1],rt=tt.start+tt.count;rt!==ce.length&&qe.addGroup(rt,ce.length-rt,$e)}0===qe.groups.length&&qe.addGroup(0,ce.length,ce[0])}return qe}function N(se){var oe=se.properties.MappingInformationType,pe=se.properties.ReferenceInformationType,de=se.subNodes.Normals.properties.a,le=[];return'IndexToDirect'===pe&&('NormalIndex'in se.subNodes?le=se.subNodes.NormalIndex.properties.a:'NormalsIndex'in se.subNodes&&(le=se.subNodes.NormalsIndex.properties.a)),{dataSize:3,buffer:de,indices:le,mappingType:oe,referenceType:pe}}function x(se){var oe=se.properties.MappingInformationType,pe=se.properties.ReferenceInformationType,de=se.subNodes.UV.properties.a,le=[];return'IndexToDirect'===pe&&(le=se.subNodes.UVIndex.properties.a),{dataSize:2,buffer:de,indices:le,mappingType:oe,referenceType:pe}}function D(se){var oe=se.properties.MappingInformationType,pe=se.properties.ReferenceInformationType,de=se.subNodes.Colors.properties.a,le=[];return'IndexToDirect'===pe&&(le=se.subNodes.ColorIndex.properties.a),{dataSize:4,buffer:de,indices:le,mappingType:oe,referenceType:pe}}function F(se){var oe=se.properties.MappingInformationType,pe=se.properties.ReferenceInformationType;if('NoMappingInformation'===oe)return{dataSize:1,buffer:[0],indices:[0],mappingType:'AllSame',referenceType:pe};for(var de=se.subNodes.Materials.properties.a,le=[],ue=0,ge=de.length;ue<ge;++ue)le.push(ue);return{dataSize:1,buffer:de,indices:le,mappingType:oe,referenceType:pe}}function T(se,oe,pe,de){return re[de.mappingType][de.referenceType](se,oe,pe,de)}function A(se){if(void 0===THREE.NURBSCurve)return console.error('THREE.FBXLoader: The loader relies on THREE.NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry.'),new THREE.BufferGeometry;var oe=parseInt(se.properties.Order);if(isNaN(oe))return console.error('THREE.FBXLoader: Invalid Order %s given for geometry ID: %s',se.properties.Order,se.id),new THREE.BufferGeometry;for(var pe=oe-1,de=se.subNodes.KnotVector.properties.a,le=[],ue=se.subNodes.Points.properties.a,ge=0,he=ue.length;ge<he;ge+=4)le.push(new THREE.Vector4().fromArray(ue,ge));var me,ce;if('Closed'===se.properties.Form)le.push(le[0]);else if('Periodic'===se.properties.Form){me=pe,ce=de.length-1-me;for(var ge=0;ge<pe;++ge)le.push(le[ge])}for(var fe=new THREE.NURBSCurve(pe,de,le,me,ce),ye=fe.getPoints(7*le.length),Ie=new Float32Array(3*ye.length),ge=0,he=ye.length;ge<he;++ge)ye[ge].toArray(Ie,3*ge);var be=new THREE.BufferGeometry;return be.addAttribute('position',new THREE.BufferAttribute(Ie,3)),be}function L(se,oe,pe,de,le){var ue=new THREE.Group,ge=se.Objects.subNodes.Model,he=[],me=new Map;for(var ce in ge){for(var fe=parseInt(ce),ye=ge[ce],Ie=oe.get(fe),be=null,ve=0;ve<Ie.parents.length;++ve)for(var Ne in pe){var xe=pe[Ne],De=xe.map,Fe=De[Ie.parents[ve].ID];if(Fe){var Te=be;be=new THREE.Bone,xe.bones[Fe.index]=be,null!=Te&&be.add(Te)}}if(!be)switch(ye.attrType){case'Camera':for(var Ae,Le=0,Se=Ie.children.length;Le<Se;++Le){var Be=Ie.children[Le].ID,Ee=se.Objects.subNodes.NodeAttribute[Be];void 0!==Ee&&void 0!==Ee.properties&&(Ae=Ee.properties)}if(void 0===Ae)be=new THREE.Object3D;else{var Ce=0;void 0!==Ae.CameraProjectionType&&1===Ae.CameraProjectionType.value&&(Ce=1);var Re=1;void 0!==Ae.NearPlane&&(Re=Ae.NearPlane.value/1e3);var Pe=1e3;void 0!==Ae.FarPlane&&(Pe=Ae.FarPlane.value/1e3);var Me=window.innerWidth,Ue=window.innerHeight;void 0!==Ae.AspectWidth&&void 0!==Ae.AspectHeight&&(Me=Ae.AspectWidth.value,Ue=Ae.AspectHeight.value);var je=Me/Ue,Oe=45;switch(void 0!==Ae.FieldOfView&&(Oe=Ae.FieldOfView.value),Ce){case 0:be=new THREE.PerspectiveCamera(Oe,je,Re,Pe);break;case 1:be=new THREE.OrthographicCamera(-Me/2,Me/2,Ue/2,-Ue/2,Re,Pe);break;default:console.warn('THREE.FBXLoader: Unknown camera type '+Ce+'.'),be=new THREE.Object3D;}}break;case'Light':for(var ke,Le=0,Se=Ie.children.length;Le<Se;++Le){var Be=Ie.children[Le].ID,Ee=se.Objects.subNodes.NodeAttribute[Be];void 0!==Ee&&void 0!==Ee.properties&&(ke=Ee.properties)}if(void 0===ke)be=new THREE.Object3D;else{var Ce=void 0===ke.LightType?0:ke.LightType.value;var ze=16777215;void 0!==ke.Color&&(ze=K(ke.Color.value));var Xe=void 0===ke.Intensity?1:ke.Intensity.value/100;void 0!==ke.CastLightOnObject&&0===ke.CastLightOnObject.value&&(Xe=0);var we=0;void 0!==ke.FarAttenuationEnd&&(void 0!==ke.EnableFarAttenuation&&0===ke.EnableFarAttenuation.value?we=0:we=ke.FarAttenuationEnd.value/1e3);var Ve=1;switch(Ce){case 0:be=new THREE.PointLight(ze,Xe,we,Ve);break;case 1:be=new THREE.DirectionalLight(ze,Xe);break;case 2:var _e=Math.PI/3;void 0!==ke.InnerAngle&&(_e=THREE.Math.degToRad(ke.InnerAngle.value));var Ge=0;void 0!==ke.OuterAngle&&(Ge=THREE.Math.degToRad(ke.OuterAngle.value),Ge=Math.max(Ge,1)),be=new THREE.SpotLight(ze,Xe,we,_e,Ge,Ve);break;default:console.warn('THREE.FBXLoader: Unknown light type '+ke.LightType.value+', defaulting to a THREE.PointLight.'),be=new THREE.PointLight(ze,Xe);}void 0!==ke.CastShadows&&1===ke.CastShadows.value&&(be.castShadow=!0)}break;case'Mesh':for(var Ze,He=null,We=null,Ye=[],Le=0,Se=Ie.children.length;Le<Se;++Le)Ze=Ie.children[Le],de.has(Ze.ID)&&(He=de.get(Ze.ID)),le.has(Ze.ID)&&Ye.push(le.get(Ze.ID));if(1<Ye.length?We=Ye:0<Ye.length?We=Ye[0]:(We=new THREE.MeshPhongMaterial({color:13421772}),Ye.push(We)),'color'in He.attributes)for(var Qe=0,Ke=Ye.length;Qe<Ke;++Qe)Ye[Qe].vertexColors=THREE.VertexColors;if(He.FBX_Deformer){for(var qe=0,Je=Ye.length;qe<Je;++qe)Ye[qe].skinning=!0;be=new THREE.SkinnedMesh(He,We)}else be=new THREE.Mesh(He,We);break;case'NurbsCurve':for(var Ze,He=null,Le=0,Se=Ie.children.length;Le<Se;++Le)Ze=Ie.children[Le],de.has(Ze.ID)&&(He=de.get(Ze.ID));We=new THREE.LineBasicMaterial({color:3342591,linewidth:5}),be=new THREE.Line(He,We);break;default:be=new THREE.Group;}be.name=THREE.PropertyBinding.sanitizeNodeName(ye.attrName),be.FBX_ID=fe,he.push(be),me.set(fe,be)}for(var $e=0,et=he.length;$e<et;++$e){var be=he[$e],ye=ge[be.FBX_ID];if('Lcl_Translation'in ye.properties&&be.position.fromArray(ye.properties.Lcl_Translation.value),'Lcl_Rotation'in ye.properties){var tt=ye.properties.Lcl_Rotation.value.map(THREE.Math.degToRad);tt.push('ZYX'),be.rotation.fromArray(tt)}if('Lcl_Scaling'in ye.properties&&be.scale.fromArray(ye.properties.Lcl_Scaling.value),'PreRotation'in ye.properties){var rt=ye.properties.PreRotation.value.map(THREE.Math.degToRad);rt[3]='ZYX';var nt=new THREE.Euler().fromArray(rt);nt=new THREE.Quaternion().setFromEuler(nt);var at=new THREE.Quaternion().setFromEuler(be.rotation);nt.multiply(at),be.rotation.setFromQuaternion(nt,'ZYX')}if('GeometricTranslation'in ye.properties){var rt=ye.properties.GeometricTranslation.value;be.traverse(function(Et){Et.geometry&&Et.geometry.translate(rt[0],rt[1],rt[2])})}if('LookAtProperty'in ye.properties)for(var Ze,Ie=oe.get(be.FBX_ID),Le=0,Se=Ie.children.length;Le<Se;++Le)if(Ze=Ie.children[Le],'LookAtProperty'===Ze.relationship){var it=se.Objects.subNodes.Model[Ze.ID];if('Lcl_Translation'in it.properties){var st=it.properties.Lcl_Translation.value;void 0===be.target?be.lookAt(new THREE.Vector3(st[0],st[1],st[2])):(be.target.position.set(st[0],st[1],st[2]),ue.add(be.target))}}for(var pt,Ie=oe.get(be.FBX_ID),ot=0;ot<Ie.parents.length;ot++)if(pt=J(he,function(Et){return Et.FBX_ID===Ie.parents[ot].ID}),-1<pt){he[pt].add(be);break}null===be.parent&&ue.add(be)}ue.updateMatrixWorld(!0);var dt=new Map;if('Pose'in se.Objects.subNodes){var lt=se.Objects.subNodes.Pose;for(var ce in lt)if('BindPose'===lt[ce].attrType){lt=lt[ce];break}for(var ut=lt.subNodes.PoseNode,gt=0,ht=ut.length;gt<ht;++gt){var ye=ut[gt],mt=new THREE.Matrix4().fromArray(ye.subNodes.Matrix.properties.a);dt.set(parseInt(ye.properties.Node),mt)}}for(var Ne in pe){var xe=pe[Ne],De=xe.map;for(var ct in De){var Fe=De[ct],ft=Fe.index,yt=xe.bones[ft];if(!dt.has(yt.FBX_ID))break;var It=dt.get(yt.FBX_ID);yt.matrixWorld.copy(It)}xe.skeleton=new THREE.Skeleton(xe.bones);for(var xt,Ie=oe.get(xe.FBX_ID),bt=Ie.parents,vt=0,Nt=bt.length;vt<Nt;++vt)if(xt=bt[vt],de.has(xt.ID))for(var Dt=xt.ID,Ft=oe.get(Dt),ve=0;ve<Ft.parents.length;++ve)if(me.has(Ft.parents[ve].ID)){var be=me.get(Ft.parents[ve].ID);be.bind(xe.skeleton,be.matrixWorld);break}}ue.updateMatrixWorld(!0),ue.skeleton={bones:he};var Tt=S(se,oe,ue);if(M(ue,Tt),'GlobalSettings'in se&&'AmbientColor'in se.GlobalSettings.properties){var At=se.GlobalSettings.properties.AmbientColor.value,Lt=At[0],St=At[1],Bt=At[2];if(0!==Lt||0!==St||0!==Bt){var ze=new THREE.Color(Lt,St,Bt);ue.add(new THREE.AmbientLight(ze,1))}}return ue}function S(se,oe,pe){var de=se.Objects.subNodes.AnimationCurveNode,le=se.Objects.subNodes.AnimationCurve,ue=se.Objects.subNodes.AnimationLayer,ge=se.Objects.subNodes.AnimationStack,he=30;if('GlobalSettings'in se&&'TimeMode'in se.GlobalSettings.properties){var ce=se.GlobalSettings.properties.TimeMode.value;14===ce?'CustomFrameRate'in se.GlobalSettings.properties&&(he=se.GlobalSettings.properties.CustomFrameRate.value,he=-1==he?30:he):17>=ce&&(he=[30,120,100,60,50,48,30,30,29.97,29.97,25,24,1,23.976,30,96,72,59.94][ce])}var fe={curves:new Map,layers:{},stacks:{},length:0,fps:he,frames:0},ye=[];for(var Ie in de)if(Ie.match(/\d+/)){var be=B(se,de[Ie],oe,pe);ye.push(be)}for(var ve=new Map,Ne=0;Ne<ye.length;++Ne)null!==ye[Ne]&&ve.set(ye[Ne].id,ye[Ne]);var xe=[];for(Ie in le)if(Ie.match(/\d+/)){var De=E(le[Ie]);if(!oe.has(De.id))continue;xe.push(De);var Fe=oe.get(De.id).parents[0],Te=Fe.ID,Ae=Fe.relationship,Le='';if(Ae.match(/X/))Le='x';else if(Ae.match(/Y/))Le='y';else if(Ae.match(/Z/))Le='z';else continue;ve.get(Te).curves[Le]=De}for(var Ie in ve.forEach(function(ke){var ze=ke.containerBoneID;if(fe.curves.has(ze)||fe.curves.set(ze,{T:null,R:null,S:null}),fe.curves.get(ze)[ke.attr]=ke,'R'===ke.attr){var Xe=ke.curves;if(null===Xe.x&&(Xe.x={version:null,times:[0],values:[0]}),null===Xe.y&&(Xe.y={version:null,times:[0],values:[0]}),null===Xe.z&&(Xe.z={version:null,times:[0],values:[0]}),Xe.x.values=Xe.x.values.map(THREE.Math.degToRad),Xe.y.values=Xe.y.values.map(THREE.Math.degToRad),Xe.z.values=Xe.z.values.map(THREE.Math.degToRad),null!==ke.preRotations){var we=new THREE.Euler().setFromVector3(ke.preRotations,'ZYX');we=new THREE.Quaternion().setFromEuler(we);for(var Ve=new THREE.Euler,_e=new THREE.Quaternion,Ge=0;Ge<Xe.x.times.length;++Ge)Ve.set(Xe.x.values[Ge],Xe.y.values[Ge],Xe.z.values[Ge],'ZYX'),_e.setFromEuler(Ve).premultiply(we),Ve.setFromQuaternion(_e,'ZYX'),Xe.x.values[Ge]=Ve.x,Xe.y.values[Ge]=Ve.y,Xe.z.values[Ge]=Ve.z}}}),ue){for(var Se=[],Be=oe.get(parseInt(Ie)).children,Ee=0;Ee<Be.length;Ee++)if(ve.has(Be[Ee].ID)){var Ce=ve.get(Be[Ee].ID),Re=Ce.containerBoneID;void 0===Se[Re]&&(Se[Re]={T:null,R:null,S:null}),Se[Re][Ce.attr]=Ce}fe.layers[Ie]=Se}for(var Ie in ge){for(var Ue,Pe=[],Be=oe.get(parseInt(Ie)).children,Me={max:0,min:Number.MAX_VALUE},Ee=0;Ee<Be.length;++Ee)if(Ue=fe.layers[Be[Ee].ID],void 0!==Ue){Pe.push(Ue);for(var Se,je=0,Oe=Ue.length;je<Oe;++je)Se=Ue[je],Se&&C(Se,Me)}Me.max>Me.min&&(fe.stacks[Ie]={name:ge[Ie].attrName,layers:Pe,length:Me.max-Me.min,frames:(Me.max-Me.min)*fe.fps})}return fe}function B(se,oe,pe,de){var le=se.Objects.subNodes.Model,ue={id:oe.id,attr:oe.attrName,internalID:oe.id,attrX:!1,attrY:!1,attrZ:!1,containerBoneID:-1,containerID:-1,curves:{x:null,y:null,z:null},preRotations:null};if(ue.attr.match(/S|R|T/))for(var ge in oe.properties)ge.match(/X/)&&(ue.attrX=!0),ge.match(/Y/)&&(ue.attrY=!0),ge.match(/Z/)&&(ue.attrZ=!0);else return null;for(var fe,he=pe.get(ue.id),me=he.parents,ce=me.length-1;0<=ce;--ce)if(fe=J(de.skeleton.bones,function(Ie){return Ie.FBX_ID===me[ce].ID}),-1<fe){ue.containerBoneID=fe,ue.containerID=me[ce].ID;var ye=le[ue.containerID.toString()];'PreRotation'in ye.properties&&(ue.preRotations=Q(ye.properties.PreRotation).multiplyScalar(Math.PI/180));break}return ue}function E(se){return{version:null,id:se.id,internalID:se.id,times:se.subNodes.KeyTime.properties.a.map(Y),values:se.subNodes.KeyValueFloat.properties.a,attrFlag:se.subNodes.KeyAttrFlags.properties.a,attrData:se.subNodes.KeyAttrDataFloat.properties.a}}function C(se,oe){se.R&&R(se.R.curves,oe),se.S&&R(se.S.curves,oe),se.T&&R(se.T.curves,oe)}function R(se,oe){se.x&&P(se.x,oe),se.y&&P(se.y,oe),se.z&&P(se.z,oe)}function P(se,oe){oe.max=se.times[se.times.length-1]>oe.max?se.times[se.times.length-1]:oe.max,oe.min=se.times[0]<oe.min?se.times[0]:oe.min}function M(se,oe){se.animations===void 0&&(se.animations=[]);var pe=oe.stacks;for(var de in pe){for(var le=pe[de],ue={name:le.name,fps:oe.fps,length:le.length,hierarchy:[]},ge=se.skeleton.bones,he=0,me=ge.length;he<me;++he){var ce=ge[he],fe=ce.name.replace(/.*:/,''),ye=J(ge,function(Fe){return ce.parent===Fe});ue.hierarchy.push({parent:ye,name:fe,keys:[]})}for(var Ie=0;Ie<=le.frames;Ie++)for(var he=0,me=ge.length;he<me;++he)for(var De,ce=ge[he],be=he,ve=le.layers[0][be],Ne=0,xe=ue.hierarchy.length;Ne<xe;++Ne)De=ue.hierarchy[Ne],De.name===ce.name&&De.keys.push(U(oe,ve,ce,Ie));se.animations.push(THREE.AnimationClip.parseAnimation(ue,ge))}}function U(se,oe,pe,de){var le={time:de/se.fps,pos:pe.position.toArray(),rot:pe.quaternion.toArray(),scl:pe.scale.toArray()};if(oe===void 0)return le;ne.setFromQuaternion(pe.quaternion,'ZYX',!1);try{O(oe,'T')&&k(oe.T,de)&&(oe.T.curves.x.values[de]&&(le.pos[0]=oe.T.curves.x.values[de]),oe.T.curves.y.values[de]&&(le.pos[1]=oe.T.curves.y.values[de]),oe.T.curves.z.values[de]&&(le.pos[2]=oe.T.curves.z.values[de])),O(oe,'R')&&k(oe.R,de)&&(oe.R.curves.x.values[de]&&(ne.x=oe.R.curves.x.values[de]),oe.R.curves.y.values[de]&&(ne.y=oe.R.curves.y.values[de]),oe.R.curves.z.values[de]&&(ne.z=oe.R.curves.z.values[de]),ae.setFromEuler(ne),le.rot=ae.toArray()),O(oe,'S')&&k(oe.S,de)&&(oe.T.curves.x.values[de]&&(le.scl[0]=oe.S.curves.x.values[de]),oe.T.curves.y.values[de]&&(le.scl[1]=oe.S.curves.y.values[de]),oe.T.curves.z.values[de]&&(le.scl[2]=oe.S.curves.z.values[de]))}catch(ue){console.log('THREE.FBXLoader: ',pe),console.log('THREE.FBXLoader: ',ue)}return le}function O(se,oe){if(se===void 0)return!1;var pe=se[oe];return!!pe&&ie.every(function(de){return null!==pe.curves[de]})}function k(se,oe){return ie.every(function(pe){return z(se.curves[pe],oe)})}function z(se,oe){return se.values[oe]!==void 0}function X(){}function w(){}function V(se,oe){this.dv=new DataView(se),this.offset=0,this.littleEndian=!(oe!==void 0)||oe}function _(){}function G(se){var oe='Kaydara FBX Binary  \0';return se.byteLength>=oe.length&&oe===q(se,0,oe.length)}function H(se){function oe(ge){var he=se[ge-1];return se=se.slice(de+ge),de++,he}for(var ue,pe=['K','a','y','d','a','r','a','\\','F','B','X','\\','B','i','n','a','r','y','\\','\\'],de=0,le=0;le<pe.length;++le)if(ue=oe(1),ue===pe[le])return!1;return!0}function W(se){var oe=/FBXVersion: (\d+)/,pe=se.match(oe);if(pe){var de=parseInt(pe[1]);return de}throw new Error('THREE.FBXLoader: Cannot find the version number for the file given.')}function Y(se){return se/46186158000}function Z(se){for(var oe=se.split(','),pe=0,de=oe.length;pe<de;pe++)oe[pe]=parseFloat(oe[pe]);return oe}function Q(se){return new THREE.Vector3().fromArray(se.value)}function K(se){return new THREE.Color().fromArray(se.value)}function q(se,oe,pe){oe===void 0&&(oe=0),pe===void 0&&(pe=se.byteLength);var de=new Uint8Array(se,oe,pe);if(window.TextDecoder!==void 0)return new TextDecoder().decode(de);for(var le='',ue=0,ge=de.length;ue<ge;ue++)le+=String.fromCharCode(de[ue]);return le}function J(se,oe){for(var pe=0,de=se.length;pe<de;pe++)if(oe(se[pe]))return pe;return-1}function $(se,oe){for(var pe=0,de=se.length,le=oe.length;pe<le;pe++,de++)se[de]=oe[pe]}function ee(se,oe,pe,de){for(var le=pe,ue=0;le<de;le++,ue++)se[ue]=oe[le];return se}THREE.FBXLoader=function(se){this.manager=se===void 0?THREE.DefaultLoadingManager:se},Object.assign(THREE.FBXLoader.prototype,{load:function(se,oe,pe,de){var le=this,ue=THREE.Loader.prototype.extractUrlBase(se),ge=new THREE.FileLoader(this.manager);ge.setResponseType('arraybuffer'),ge.load(se,function(he){try{var me=le.parse(he,ue);oe(me)}catch(ce){window.setTimeout(function(){de&&de(ce),le.manager.itemError(se)},0)}},pe,de)},parse:function(se,oe){var pe;if(G(se))pe=new w().parse(se);else{var de=q(se);if(!H(de))throw new Error('THREE.FBXLoader: Unknown format.');if(7e3>W(de))throw new Error('THREE.FBXLoader: FBX version not supported, FileVersion: '+W(de));pe=new X().parse(de)}var le=e(pe),ue=t(pe),ge=o(pe,new THREE.TextureLoader(this.manager).setPath(oe),ue,le),he=d(pe,ge,le),me=m(pe,le),ce=f(pe,le,me),fe=L(pe,le,me,ce,he);return fe}});var te=[],re={ByPolygonVertex:{Direct:function(se,oe,pe,de){var le=se*de.dataSize,ue=se*de.dataSize+de.dataSize;return ee(te,de.buffer,le,ue)},IndexToDirect:function(se,oe,pe,de){var le=de.indices[se],ue=le*de.dataSize,ge=le*de.dataSize+de.dataSize;return ee(te,de.buffer,ue,ge)}},ByPolygon:{Direct:function(se,oe,pe,de){var le=oe*de.dataSize,ue=oe*de.dataSize+de.dataSize;return ee(te,de.buffer,le,ue)},IndexToDirect:function(se,oe,pe,de){var le=de.indices[oe],ue=le*de.dataSize,ge=le*de.dataSize+de.dataSize;return ee(te,de.buffer,ue,ge)}},ByVertice:{Direct:function(se,oe,pe,de){var le=pe*de.dataSize,ue=pe*de.dataSize+de.dataSize;return ee(te,de.buffer,le,ue)}},AllSame:{IndexToDirect:function(se,oe,pe,de){var le=de.indices[0]*de.dataSize,ue=de.indices[0]*de.dataSize+de.dataSize;return ee(te,de.buffer,le,ue)}}},ne=new THREE.Euler,ae=new THREE.Quaternion,ie=['x','y','z'];Object.assign(X.prototype,{getPrevNode:function(){return this.nodeStack[this.currentIndent-2]},getCurrentNode:function(){return this.nodeStack[this.currentIndent-1]},getCurrentProp:function(){return this.currentProp},pushStack:function(se){this.nodeStack.push(se),this.currentIndent+=1},popStack:function(){this.nodeStack.pop(),this.currentIndent-=1},setCurrentProp:function(se,oe){this.currentProp=se,this.currentPropName=oe},parse:function(se){this.currentIndent=0,this.allNodes=new _,this.nodeStack=[],this.currentProp=[],this.currentPropName='';for(var le,oe=se.split('\n'),pe=0,de=oe.length;pe<de;pe++)if((le=oe[pe],!le.match(/^[\s\t]*;/))&&!le.match(/^[\s\t]*$/)){var ue=new RegExp('^\\t{'+this.currentIndent+'}(\\w+):(.*){',''),ge=le.match(ue);if(ge){for(var he=ge[1].trim().replace(/^"/,'').replace(/"$/,''),me=ge[2].split(','),ce=0,le=me.length;ce<le;ce++)me[ce]=me[ce].trim().replace(/^"/,'').replace(/"$/,'');this.parseNodeBegin(le,he,me||null);continue}var fe=new RegExp('^\\t{'+this.currentIndent+'}(\\w+):[\\s\\t\\r\\n](.*)'),ge=le.match(fe);if(ge){var ye=ge[1].replace(/^"/,'').replace(/"$/,'').trim(),Ie=ge[2].replace(/^"/,'').replace(/"$/,'').trim();'Content'===ye&&','===Ie&&(Ie=oe[++pe].replace(/"/g,'').replace(/,$/,'').trim()),this.parseNodeProperty(le,ye,Ie);continue}var be=new RegExp('^\\t{'+(this.currentIndent-1)+'}}');if(le.match(be)){this.nodeEnd();continue}le.match(/^[^\s\t}]/)&&this.parseNodePropertyContinued(le)}return this.allNodes},parseNodeBegin:function(se,oe,pe){var de={name:oe,properties:{},subNodes:{}},le=this.parseNodeAttr(pe),ue=this.getCurrentNode();if(0===this.currentIndent)this.allNodes.add(oe,de);else if(oe in ue.subNodes){var ge=ue.subNodes[oe];this.isFlattenNode(ue.subNodes[oe])&&(''===le.id?(ue.subNodes[oe]=[],ue.subNodes[oe].push(ge)):(ue.subNodes[oe]={},ue.subNodes[oe][ge.id]=ge)),''===le.id?ue.subNodes[oe].push(de):ue.subNodes[oe][le.id]=de}else'number'==typeof le.id||le.id.match(/^\d+$/)?(ue.subNodes[oe]={},ue.subNodes[oe][le.id]=de):ue.subNodes[oe]=de;pe&&(de.id=le.id,de.attrName=le.name,de.attrType=le.type),this.pushStack(de)},parseNodeAttr:function(se){var oe=se[0];''!==se[0]&&(oe=parseInt(se[0]),isNaN(oe)&&(oe=se[0]));var pe='',de='';return 1<se.length&&(pe=se[1].replace(/^(\w+)::/,''),de=se[2]),{id:oe,name:pe,type:de}},parseNodeProperty:function(se,oe,pe){var de=this.getCurrentNode(),le=de.name;if(le!==void 0){var ue=le.match(/Properties(\d)+/);if(ue)return void this.parseNodeSpecialProperty(se,oe,pe)}if('C'===oe){var ge=pe.split(',').slice(1),he=parseInt(ge[0]),me=parseInt(ge[1]),ce=pe.split(',').slice(3);ce=ce.map(function(ye){return ye.trim().replace(/^"/,'')}),oe='connections',pe=[he,me],$(pe,ce),void 0===de.properties[oe]&&(de.properties[oe]=[])}if('Node'===oe){var fe=parseInt(pe);de.properties.id=fe,de.id=fe}oe in de.properties?Array.isArray(de.properties[oe])?de.properties[oe].push(pe):de.properties[oe]+=pe:Array.isArray(de.properties[oe])?de.properties[oe].push(pe):de.properties[oe]=pe,this.setCurrentProp(de.properties,oe),'a'===oe&&','!==pe.slice(-1)&&(de.properties.a=Z(pe))},parseNodePropertyContinued:function(se){if(this.currentProp[this.currentPropName]+=se,','!==se.slice(-1)){var oe=this.getCurrentNode();oe.properties.a=Z(oe.properties.a)}},parseNodeSpecialProperty:function(se,oe,pe){for(var de=pe.split('",'),le=0,ue=de.length;le<ue;le++)de[le]=de[le].trim().replace(/^\"/,'').replace(/\s/,'_');var ge=de[0],he=de[1],me=de[2],ce=de[3],fe=de[4];'int'===he||'enum'===he||'bool'===he||'ULongLong'===he?fe=parseInt(fe):'double'===he||'Number'===he||'FieldOfView'===he?fe=parseFloat(fe):'ColorRGB'===he||'Vector3D'===he||'Lcl_Translation'===he||'Lcl_Rotation'===he||'Lcl_Scaling'===he?fe=Z(fe):void 0;this.getPrevNode().properties[ge]={type:he,type2:me,flag:ce,value:fe},this.setCurrentProp(this.getPrevNode().properties,ge)},nodeEnd:function(){this.popStack()},isFlattenNode:function(se){return'subNodes'in se&&'properties'in se}}),Object.assign(w.prototype,{parse:function(se){var oe=new V(se);oe.skip(23);var pe=oe.getUint32();console.log('THREE.FBXLoader: FBX binary version: '+pe);for(var le,de=new _;!this.endOfContent(oe);)le=this.parseNode(oe,pe),null!==le&&de.add(le.name,le);return de},endOfContent:function(se){return 0==se.size()%16?(-16&se.getOffset()+160+16)>=se.size():se.getOffset()+160+16>=se.size()},parseNode:function(se,oe){var pe=7500<=oe?se.getUint64():se.getUint32(),de=7500<=oe?se.getUint64():se.getUint32(),le=7500<=oe?se.getUint64():se.getUint32(),ue=se.getUint8(),ge=se.getString(ue);if(0===pe)return null;for(var he=[],me=0;me<de;me++)he.push(this.parseProperty(se));var ce=0<he.length?he[0]:'',fe=1<he.length?he[1]:'',ye=2<he.length?he[2]:'',Ie={},be={},ve=!1;for(1===de&&se.getOffset()===pe&&(ve=!0);pe>se.getOffset();){var Ne=this.parseNode(se,oe);if(null!==Ne){if(!0===Ne.singleProperty){var xe=Ne.propertyList[0];Array.isArray(xe)?(Ie[Ne.name]=Ne,Ne.properties.a=xe):be[Ne.name]=xe;continue}if('Connections'===ge&&'C'===Ne.name){for(var De=[],me=1,Fe=Ne.propertyList.length;me<Fe;me++)De[me-1]=Ne.propertyList[me];void 0===be.connections&&(be.connections=[]),be.connections.push(De);continue}if(Ne.name.match(/^Properties\d+$/)){for(var Ae,Te=Object.keys(Ne.properties),me=0,Fe=Te.length;me<Fe;me++)Ae=Te[me],be[Ae]=Ne.properties[Ae];continue}if(ge.match(/^Properties\d+$/)&&'P'===Ne.name){var Ce,Le=Ne.propertyList[0],Se=Ne.propertyList[1],Be=Ne.propertyList[2],Ee=Ne.propertyList[3];0===Le.indexOf('Lcl ')&&(Le=Le.replace('Lcl ','Lcl_')),0===Se.indexOf('Lcl ')&&(Se=Se.replace('Lcl ','Lcl_')),Ce='ColorRGB'===Se||'Vector'===Se||'Vector3D'===Se||0===Se.indexOf('Lcl_')?[Ne.propertyList[4],Ne.propertyList[5],Ne.propertyList[6]]:Ne.propertyList[4],be[Le]={type:Se,type2:Be,flag:Ee,value:Ce};continue}Ie[Ne.name]===void 0?'number'==typeof Ne.id?(Ie[Ne.name]={},Ie[Ne.name][Ne.id]=Ne):Ie[Ne.name]=Ne:''===Ne.id?(!Array.isArray(Ie[Ne.name])&&(Ie[Ne.name]=[Ie[Ne.name]]),Ie[Ne.name].push(Ne)):Ie[Ne.name][Ne.id]===void 0?Ie[Ne.name][Ne.id]=Ne:(!Array.isArray(Ie[Ne.name][Ne.id])&&(Ie[Ne.name][Ne.id]=[Ie[Ne.name][Ne.id]]),Ie[Ne.name][Ne.id].push(Ne))}}return{singleProperty:ve,id:ce,attrName:fe,attrType:ye,name:ge,properties:be,propertyList:he,subNodes:Ie}},parseProperty:function(se){var oe=se.getChar();switch(oe){case'C':return se.getBoolean();case'D':return se.getFloat64();case'F':return se.getFloat32();case'I':return se.getInt32();case'L':return se.getInt64();case'R':var pe=se.getUint32();return se.getArrayBuffer(pe);case'S':var pe=se.getUint32();return se.getString(pe);case'Y':return se.getInt16();case'b':case'c':case'd':case'f':case'i':case'l':var de=se.getUint32(),le=se.getUint32(),ue=se.getUint32();if(0===le)switch(oe){case'b':case'c':return se.getBooleanArray(de);case'd':return se.getFloat64Array(de);case'f':return se.getFloat32Array(de);case'i':return se.getInt32Array(de);case'l':return se.getInt64Array(de);}if(void 0===window.Zlib)throw new Error('THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js');var ge=new Zlib.Inflate(new Uint8Array(se.getArrayBuffer(ue))),he=new V(ge.decompress().buffer);switch(oe){case'b':case'c':return he.getBooleanArray(de);case'd':return he.getFloat64Array(de);case'f':return he.getFloat32Array(de);case'i':return he.getInt32Array(de);case'l':return he.getInt64Array(de);}default:throw new Error('THREE.FBXLoader: Unknown property type '+oe);}}}),Object.assign(V.prototype,{getOffset:function(){return this.offset},size:function(){return this.dv.buffer.byteLength},skip:function(se){this.offset+=se},getBoolean:function(){return 1==(1&this.getUint8())},getBooleanArray:function(se){for(var oe=[],pe=0;pe<se;pe++)oe.push(this.getBoolean());return oe},getInt8:function(){var se=this.dv.getInt8(this.offset);return this.offset+=1,se},getInt8Array:function(se){for(var oe=[],pe=0;pe<se;pe++)oe.push(this.getInt8());return oe},getUint8:function(){var se=this.dv.getUint8(this.offset);return this.offset+=1,se},getUint8Array:function(se){for(var oe=[],pe=0;pe<se;pe++)oe.push(this.getUint8());return oe},getInt16:function(){var se=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,se},getInt16Array:function(se){for(var oe=[],pe=0;pe<se;pe++)oe.push(this.getInt16());return oe},getUint16:function(){var se=this.dv.getUint16(this.offset,this.littleEndian);return this.offset+=2,se},getUint16Array:function(se){for(var oe=[],pe=0;pe<se;pe++)oe.push(this.getUint16());return oe},getInt32:function(){var se=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,se},getInt32Array:function(se){for(var oe=[],pe=0;pe<se;pe++)oe.push(this.getInt32());return oe},getUint32:function(){var se=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,se},getUint32Array:function(se){for(var oe=[],pe=0;pe<se;pe++)oe.push(this.getUint32());return oe},getInt64:function(){var se,oe;return this.littleEndian?(se=this.getUint32(),oe=this.getUint32()):(oe=this.getUint32(),se=this.getUint32()),2147483648&oe?(oe=4294967295&~oe,se=4294967295&~se,4294967295===se&&(oe=4294967295&oe+1),se=4294967295&se+1,-(4294967296*oe+se)):4294967296*oe+se},getInt64Array:function(se){for(var oe=[],pe=0;pe<se;pe++)oe.push(this.getInt64());return oe},getUint64:function(){var se,oe;return this.littleEndian?(se=this.getUint32(),oe=this.getUint32()):(oe=this.getUint32(),se=this.getUint32()),4294967296*oe+se},getUint64Array:function(se){for(var oe=[],pe=0;pe<se;pe++)oe.push(this.getUint64());return oe},getFloat32:function(){var se=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,se},getFloat32Array:function(se){for(var oe=[],pe=0;pe<se;pe++)oe.push(this.getFloat32());return oe},getFloat64:function(){var se=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,se},getFloat64Array:function(se){for(var oe=[],pe=0;pe<se;pe++)oe.push(this.getFloat64());return oe},getArrayBuffer:function(se){var oe=this.dv.buffer.slice(this.offset,this.offset+se);return this.offset+=se,oe},getChar:function(){return String.fromCharCode(this.getUint8())},getString:function(se){for(var pe,oe='';0<se&&(pe=this.getUint8(),se--,0!==pe);)oe+=String.fromCharCode(pe);return oe=decodeURIComponent(escape(oe)),this.skip(se),oe}}),Object.assign(_.prototype,{add:function(se,oe){this[se]=oe}})})();